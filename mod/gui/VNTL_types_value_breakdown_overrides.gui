types VNTL_types_value_breakdown_overrides
{
    type widget_value_breakdown_tooltip = widget {
        name = "values_grid"
        size = { 50 50 }
        alwaystransparent = no

        background = {
            using = Background_Area_Border_Solid
        }

        vbox = {
            datamodel = "[ValueBreakdown.GetSubValues]"
            alwaystransparent = no
            set_parent_size_to_minimum = yes
            margin = { 17 10 }
            spacing = 3

            # MOD(vanity-titles)
            ignoreinvisible = yes
            # END MOD

            item = {
                hbox = {
                    name = "value_breakdown"
                    layoutpolicy_horizontal = expanding

                    # MOD(vanity-titles)
                    ignoreinvisible = yes
                    using = VNTL_hide_held_vanity_title_modifier
                    # END MOD

                    text_single = {
                        name = "name"
                        layoutpolicy_horizontal = expanding
                        text = "[ValueBreakdown.GetName]"
                        min_width = 180
                        max_width = 250
                        fonttintcolor = "[TooltipInfo.GetTintColor]"
                        margin_right = 10
                    }

                    text_single= {
                        visible = "[And(ValueBreakdown.HasTooltip, ValueBreakdown.ShouldShowValue)]"
                        name = "value_with_tooltip"
                        text = "[ValueBreakdown.GetValue|L]"
                        align = right
                        fonttintcolor = "[TooltipInfo.GetTintColor]"

                        using = tooltip_below

                        tooltipwidget = {
                            recursive = yes

                            widget_value_breakdown_tooltip = {}
                        }
                    }

                    # MOD(vanity-titles)
                    VNTL_text_single_held_duchy_modifier_value = {}
                    # END MOD

                    # MOD(vanity-titles)
                    vbox = {
                        layoutpolicy_horizontal = expanding
                        using = VNTL_hide_held_duchy_modifier
                        # Note no closing brace here - this block is closed later
                    # END MOD
                    text_single = {
                        visible = "[And( Not(ValueBreakdown.HasTooltip), ValueBreakdown.ShouldShowValue )]"
                        name = "value_with_no_tooltip"
                        text = "[ValueBreakdown.GetValue]"
                        align = right
                        fonttintcolor = "[TooltipInfo.GetTintColor]"
                    }
                    # MOD(vanity-titles)
                    } # This closes vbox
                    # END MOD
                }
            }
        }
    }
}
