on_game_start_after_lobby = {
	on_actions = { VNTL_on_game_start_after_lobby }
}

VNTL_on_game_start_after_lobby = {
	effect = {
		#debug_log = "VNTL_on_game_start_after_lobby FIRED"

		# TODO: Pre-generate offline
		add_to_global_variable_list = { name = VNTL_vanity_titles target = title:d_VNTL_vanity_0 }
		add_to_global_variable_list = { name = VNTL_vanity_titles target = title:d_VNTL_vanity_1 }
		# TODO: etc.

		# TODO: Pre-generate offline
		set_global_variable = { name = VNTL_vanity_title_0 value = title:d_VNTL_vanity_0 }
		set_global_variable = { name = VNTL_vanity_title_1 value = title:d_VNTL_vanity_1 }
		# TODO: etc.

		# FIXME: Testing
		random_player = {
			destroy_title = title:e_hre
		}
		# END FIXME
	}

	# events = {
	# 	# Empty
	# }
}

# TODO: Extract the following on_actions into a separate file

# root: Character - Character ranking up
# scope:title: Title - Old primary title
on_rank_up = {
	on_actions = { VNTL_on_rank_up }
}

# root = character ranking up
# scope:title = old primary title
VNTL_on_rank_up = {
	effect = {
		primary_title = {
			save_scope_as = VNTL_new_primary_title
		}

		VNTL_on_character_primary_title_changed = {
			NEW_PRIMARY_TITLE = scope:VNTL_new_primary_title
		}
	}
}

# root: Character - Character ranking up
# scope:title: Title - Old primary title
on_rank_down = {
	on_actions = { VNTL_on_rank_up }
}

# root = character ranking up
# scope:title = old primary title
VNTL_on_rank_down = {
	effect = {
		primary_title = {
			save_scope_as = VNTL_new_primary_title
		}

		VNTL_on_character_primary_title_changed = {
			NEW_PRIMARY_TITLE = scope:VNTL_new_primary_title
		}
	}
}
