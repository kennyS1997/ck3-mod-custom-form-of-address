# IsValid() - whether title given as root is one of the vanity titles.
VNTL_sgui_is_vanity_title = {
	scope = title

	is_valid = {
		VNTL_is_vanity_title = yes
	}
}

# Partial logic for "Edit FoA" button in window_title.gui .
# If necessary, this prepares vanity title and binds it to the primary title given as root.
# I.e. it selects available VT and makes the player its holder,
# sets VNTL_bound_vanity_title variable on the given primary title
# and sets VNTL_bound_primary_title variable on the VT.
# Actual opening of "Edit FoA" window (which is simply the rename window
# for bound vanity title with labels changed) is achieved
# via subsequent call to OpenTitleRenamePopup() in onclick action.
#
# IsShown() - visible for any player-held title.
# IsValid() - enabled only for player's primary title.
# Execute() - bind an available[1] vanity title to the given primary title.
#
# [1] Vanity title (VT) to bind is selected according to the following order of precedence:
#       0 (no-op). Active VT already bound to this title (VNTL_bound_primary_title set to this primary title, holder matches).
#       1. Any inactive VT already bound to this title (VNTL_bound_primary_title set to this primary title, no holder).
#       2. Any unbound VT (no VNTL_bound_primary_title variable, no holder expected).
#       3. Any inactive VT already bound to a different title (VNTL_bound_primary_title set to a different title, no holder).
#       4. Any active VT already bound to a different title (VNTL_bound_primary_title set to a different title, different holder).
VNTL_sgui_bind_vanity_title = {
	scope = title

	saved_scopes = {
		player
	}

	is_shown = {
		holder = scope:player
	}

	is_valid = {
		scope:player = {
			primary_title = root
		}
	}

	effect = {
		# TODO
	}
}

VNTL_test_sgui_getter = {
	scope = character

	# saved_scopes = {
	# 	character_key_flag
	# }

	effect = {
		hidden_effect = {
			# TODO
		}

		# custom_description_no_bullet = {
		# 	text = VNTL_effect_test
		# 	subject = scope:target_character
		# 	object = scope:target_title
		# }
	}
}
